<div align="center">

# 🔥 Still Struggling with Awkward Conversations? 🔥

## 💔 Still Missing Out on That Special Someone Because You Don't Know How to Chat? 💔

### 🍻 Time to Raise a Glass and Say Goodbye to Social Anxiety! 🍻

<img src="https://media.giphy.com/media/8Iv5lqKwKsZ2g/giphy.gif" width="200"/>


*Great Gatsby Style Celebratory Toast* 🥂

---

# 🎯 XiaoYang Emotion Radar - AI Chat Assistant

[![Java](https://img.shields.io/badge/Java-21-orange.svg)](https://openjdk.java.net/)
[![Spring Boot](https://img.shields.io/badge/Spring%20Boot-3.4.4-green.svg)](https://spring.io/projects/spring-boot)
[![Spring AI](https://img.shields.io/badge/Spring%20AI-1.0.0-blue.svg)](https://spring.io/projects/spring-ai)
[![Vue 3](https://img.shields.io/badge/Vue-3.5.18-green.svg)](https://vuejs.org/)
[![Ant Design Vue](https://img.shields.io/badge/Ant%20Design%20Vue-4.2.6-blue.svg)](https://antdv.com/)
[![License](https://img.shields.io/badge/License-MIT-blue.svg)](LICENSE)

**🌐 Language / 语言选择:**
**[🇺🇸 English](README_EN.md) | [🇨🇳 中文](README_CN.md)**

</div>

<div align="center">

## 🚀 Say Goodbye to Awkward Conversations, Let AI Be Your Chat Strategist!

### 💬 Don't Know How to Reply? Three Taps Solve All Embarrassing Moments!

---

### 🎉 Core Features

**📱 Three-Step Strategy**: Triple-tap back → AI analysis → Perfect reply (28 seconds to solve)

**🧠 Emotion Radar**: Deep understanding of conversation context, generating the most fitting replies

**💕 End Your Single Life**: No more missing out on your crush due to poor chatting skills

</div>

## ✨ Project Highlights

<div align="center">

### 🎭 Say Goodbye to These Awkward Moments

| 😰 Chat Dilemma | 🤖 AI Rescue | 🎉 Perfect Result |
|------------|----------|-----------|
| 💬 "Are you there?" | 🔍 Smart context analysis | 😊 Natural reply, no awkwardness |
| 🤔 Don't know what to talk about | 🎯 Topic suggestion generation | 💕 Chat atmosphere warming up |
| 😅 Replies too stiff | 🎨 Personalized language | 🌟 Show your true charm |

</div>

### 🎯 Core Functions
- **🔍 Intelligent Screenshot Analysis**: AI vision model analyzes various chat app interfaces
- **💖 Emotion Radar System**: Deep understanding of conversation context and emotional background  
- **🎨 Personalized Reply Suggestions**: Generate diverse reply options that fit the context
- **📱 Apple Shortcuts Integration**: Triple-tap the back to start analysis

### 🔥 Application Scenarios
- **🆘 Social Difficulty Lifesaver**: Intelligent assistant when you don't know how to reply
- **💬 Awkward Chat Terminator**: Provides natural and smooth conversation suggestions
- **🧠 Emotional Understanding**: Analyzes conversation background and emotional states
- **📲 Multi-platform Support**: Supports WeChat, QQ, DingTalk, Feishu and other mainstream chat apps

<div align="center">

### 🎊 Success Stories

**Now you can also:**

🌹 **Never Run Out of Words When Flirting** - AI helps you find the perfect opening line

💼 **More Professional Workplace Communication** - Generate appropriate replies based on scenarios

👨‍👩‍👧‍👦 **More Harmonious Family Group Chats** - Intelligently recognize elderly chat styles

<div align="center">

### 🥂 Raise a Glass to Celebrate the End of Social Anxiety!

<img src="https://media.giphy.com/media/8Iv5lqKwKsZ2g/giphy.gif" width="200"/>



*Super Cute Yellow Face Cheers* 🥂✨

</div>

</div>

## 🚀 Quick Start

### 📱 Apple Shortcuts Configuration

1. **Download Shortcuts**
   - Visit: [Shortcuts Download Link](https://www.icloud.com/shortcuts/7b2052379bd24d95a4cc08ae6e5bc3cf)
   - Click to get the shortcut and add it to the Shortcuts app

2. **Set Back Tap Trigger**
   - Open iPhone "Settings" → "Accessibility" → "Touch"
   - Select "Back Tap" → "Triple Tap"
   - Choose the shortcut you just added

3. **Configure Shortcut Service Address**
   - Modify the server address in the shortcut to your deployment address
   - Local development: `http://localhost:8123`
   - Production environment: `http://your-domain.com:8123`

4. **Usage Method**
   - Take a screenshot in any chat interface or directly in the chat interface
   - Triple-tap the back of your phone
   - Wait for AI analysis and get reply suggestions (about 28 seconds - no good optimization solution yet)
   - Analysis results will be displayed as an HTML page (via Nginx service on port 12845)

### 📸 Shortcuts Usage Examples

<div align="center">

#### 🎯 Complete Operation Flow Demo

**Step 1: Chat Interface Screenshot Analysis**
<img src="https://imgsea.com/images/2025/09/17/7bf9884d488f449aa65f036125a72506.md.jpg" width="300" alt="Chat interface screenshot"/>
*📱 Upload chat screenshot, AI starts intelligent recognition*

---

**Step 2: Select Chat Background Scene**
<img src="https://imgsea.com/images/2025/09/17/019b337ebcb000f4734649f1cd5d6812.md.jpg" width="300" alt="Select chat background"/>
*🎭 Choose conversation scenario: friend chat, workplace communication, romantic conversation, etc.*

---

**Step 3: Set Emotional Index**
<img src="https://imgsea.com/images/2025/09/17/4fe16d260d045a4a346c08dd2936adde.md.jpg" width="300" alt="Select emotional score"/>
*📊 Adjust emotional intensity: 1-10 points, match your desired reply style*

---

**Step 4: Get AI Reply Suggestions**
<img src="https://imgsea.com/images/2025/09/17/ba1c9d3abffbfc35342d8937e81a7dec.md.jpg" width="300" alt="AI analysis results"/>
*🤖 AI generates multiple reply options, say goodbye to awkward chat troubles!*

**🎉 From awkward chat to divine replies, just 28 seconds (no good optimization solution yet) in four steps!**

</div>

### 🛠 Local Deployment

#### 📋 Environment Requirements

**Required Environment**
- ☕ **Java 21+** - Core runtime environment
- 🗄️ **MySQL 8.0+** - Main database
- 🔴 **Redis 6.0+** - Cache and session management
- 📦 **Maven 3.8+** - Build tool
- 🌐 **Node.js 20.19+** - Frontend build environment

**Optional Environment**
- 📊 **PgVector** - Vector database (if RAG functionality needed)
- 🔧 **MCP Server** - Extended tool calls (like Amap API)

#### 🚀 Quick Launch

**1. Clone Project**
```bash
git clone https://github.com/your-username/my-ai-agent.git
cd my-ai-agent
```

**2. Database Initialization**
```sql
# Create database
CREATE DATABASE ggy_picture CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci;

# Create user (optional)
CREATE USER 'ggy_user'@'localhost' IDENTIFIED BY 'your_password';
GRANT ALL PRIVILEGES ON ggy_picture.* TO 'ggy_user'@'localhost';
FLUSH PRIVILEGES;
```

**3. Configuration File Preparation**

⚠️ **Important Reminder**: Must complete the following configuration file renaming and editing before running!

```bash
# Step 1: Copy and rename configuration file template
cp src/main/resources/application-local.yml.example src/main/resources/application-local.yml

# Step 2: If MCP functionality is needed, copy MCP configuration file
cp src/main/resources/mcp-servers.json.example src/main/resources/mcp-servers.json

# Step 3: Edit local configuration file
vim src/main/resources/application-local.yml
```

**📝 Required Configuration Items**:
```yaml
spring:
  ai:
    dashscope:
      # ⚠️ Must configure: Alibaba Cloud Tongyi Qianwen API key
      api-key: sk-your-dashscope-api-key-here
  datasource:
    # ⚠️ Must configure: MySQL database password
    password: your-database-password-here
    # Optional: Custom database connection info
    url: jdbc:mysql://localhost:3306/ggy_picture
    username: root
  data:
    redis:
      # Optional: If Redis has password set
      # password: your-redis-password
      host: 127.0.0.1
      port: 6379

# Optional configuration: Web search functionality
search-api:
  api-key: your-search-api-key-here

# Optional configuration: Custom service port
server:
  port: 8123  # Default port, can be modified as needed

# Optional configuration: Application base URL
app:
  base-url: http://localhost:8123
```

**🔧 MCP Service Configuration (Optional)**:
If you need to use extended features like Amap, edit `src/main/resources/mcp-servers.json`:
```json
{
  "mcpServers": {
    "amap-maps": {
      "command": "npx",
      "args": ["-y", "@amap/amap-maps-mcp-server"],
      "env": {
        "AMAP_MAPS_API_KEY": "your-amap-api-key-here"
      }
    }
  }
}
```

**4. Service Startup**
```bash
# Start basic services
redis-server                           # Start Redis
mysql.server start                     # Start MySQL

# Backend service
mvn clean package -DskipTests
java -jar target/chat-ai-agent-0.0.1-SNAPSHOT.jar

# Frontend service (new terminal)
cd ggy-chat-ai-agent/ggy-chat-ai-agent
npm install
npm run dev
```

**5. Nginx Static Resource Service Configuration**

To properly display generated HTML analysis reports, configure Nginx static resource server:

```bash
# Create static resource directory
sudo mkdir -p /www/tmp/code_output
sudo chmod 755 /www/tmp/code_output
```

Add to `/etc/nginx/conf.d/static-server.conf` or `/etc/nginx/sites-available/static-server`:
```nginx
# Static resource server - Port 12845
server {
    listen       12845;
    server_name  localhost;  # Change to your domain in production

    charset      utf-8;
    charset_types text/css application/javascript text/plain text/xml application/json;
    
    # Project deployment root directory - HTML analysis report storage path
    root         /www/tmp/code_output;
    
    # Handle all requests, support dynamic path access
    location ~ ^/([^/]+)/(.*)$ {
        try_files /$1/$2 /$1/index.html =404;
    }
    
    # Add security headers
    add_header X-Frame-Options DENY;
    add_header X-Content-Type-Options nosniff;
    
    # Static resource cache settings
    location ~* \.(css|js|png|jpg|jpeg|gif|ico|svg)$ {
        expires 1d;
        add_header Cache-Control "public, immutable";
    }
}
```

Restart Nginx service:
```bash
# Test configuration
sudo nginx -t

# Restart Nginx
sudo systemctl restart nginx
# or
sudo nginx -s reload
```

**6. Application Configuration Modification**

⚠️ **Important**: Need to modify the static resource access domain configuration in the project

Find the `CODE_DEPLOY_HOST` constant in the project (usually in constants class), modify to your actual domain:

```java
/**
 * Application deployment domain - change to your own domain and port
 */
String CODE_DEPLOY_HOST = "http://your-domain.com:12845";
// Local development environment example:
// String CODE_DEPLOY_HOST = "http://localhost:12845";
// Production environment example:
// String CODE_DEPLOY_HOST = "http://ddns.6010.top:12845";
```

**7. Access Verification**
- 🔍 **API Documentation**: http://localhost:8123/api/doc.html
- 🎨 **Frontend Interface**: http://localhost:5173
- ❤️ **Health Check**: http://localhost:8123/api/chat-ai/health
- 📄 **Static Resource Service**: http://localhost:12845

## 🏗 Technical Architecture

### 🔧 Backend Tech Stack
- **Core Framework**: Spring Boot 3.4.4 + Java 21
- **AI Engine**: Spring AI 1.0.0 + Alibaba Cloud Bailian DashScope
- **Vision Model**: Tongyi Qianwen VL (qwen-vl-max) - Multimodal image understanding
- **Data Storage**: MySQL 8.0 + MyBatis-Flex 1.11.1
- **Cache System**: Redis 6.0+ + Redisson 3.50.0
- **Image Processing**: Smart compression algorithm + JPEG quality optimization
- **API Documentation**: Knife4j 4.5.0 (based on OpenAPI 3)
- **Tool Integration**: Web search, PDF generation, terminal operations, file processing, etc.

### 🎨 Frontend Tech Stack
- **Core Framework**: Vue 3.5.18 + TypeScript 5.8+
- **Build Tool**: Vite 7.0.6 + Node.js 20.19+
- **UI Component Library**: Ant Design Vue 4.2.6
- **Data Visualization**: ECharts 5.6.0 + Vue-ECharts 7.0.3
- **Route Management**: Vue Router 4.5.1
- **State Management**: Pinia 3.0.3
- **HTTP Client**: Axios 1.12.1
- **Code Quality**: ESLint + Prettier

### 🧠 AI Core Capabilities
- **Multimodal Analysis**: Text + image joint understanding, supports WeChat/QQ/DingTalk and other mainstream chat apps
- **Emotion Radar System**: Deep analysis of conversation context, relationship types, emotional background
- **Intelligent Prompt Engineering**: 409 lines of professional prompts, ensuring reply originality and human-like quality
- **Conversation Memory Management**: Redis-based session state persistence
- **Tool Call Chain**: Web search, PDF processing, terminal operations and other tool integrations
- **Structured Output**: JSON Schema constraints, ensuring response format consistency
- **Performance Optimization**: Image smart compression, parallel processing, caching strategies

## 📊 Performance Optimization

### Image Processing Optimization
- **Smart Compression**: Automatically adjust compression strategy based on image size
- **Format Optimization**: JPEG high-quality compression, reduce transmission time
- **Resolution Adaptation**: Turn off high-resolution mode, improve processing speed

### Response Time Optimization
- **Parallel Processing**: Image compression and AI analysis execute in parallel
- **Caching Strategy**: Redis caches common analysis results
- **Connection Pool**: Database connection pool optimization
- **Current Average Response Time**: ~28 seconds (no good optimization solution yet)

## 🔧 API Interface Documentation

### 🎯 Core Business Interfaces

#### 1. Emotion Radar Core Service (Recommended)
```http
POST /api/chat-ai/emotion-radar
Content-Type: multipart/form-data

Parameters:
- file: Chat interface screenshot (required)
- emotionalIndex: Emotional index 1-10 (required)
- conversationScene: Chat background description (required)

Returns: HTML format visual analysis report
```

#### 2. JSON Format Image Analysis
```http
POST /api/chat-ai/is-json
Content-Type: multipart/form-data

Parameters:
- file: Chat interface screenshot
- emotionalIndex: Emotional index

Returns: JSON format analysis results
```

#### 3. SSE Streaming Chat
```http
GET /api/chat-ai/travel_guide/chat/sse/emitter
Parameters:
- message: User message
- chatId: Session ID

Returns: Server-Sent Events stream
```

### 📊 Management Interfaces

#### System Health Check
```http
GET /api/chat-ai/health

Returns: System status, cache statistics, active connections, etc.
```

#### Get Chat Records
```http
GET /api/chat-ai/chat/memory/redis?chatId={chatId}

Returns: Chat history in Redis
```

#### User Feedback Submission
```http
POST /api/chat-ai/chat/user/feedback
Content-Type: application/json

{
  "chatId": "Session ID",
  "messageType": "Feedback type",
  "feedBackMessage": "Feedback content",
  "resultStructure": {
    "selectedText": "Selected text",
    "timestamp": "Timestamp",
    "emotionalIndex": 5
  }
}
```

### 🛠 Data Management Interfaces

#### Image Analysis Record Management
```http
# Paginated query
POST /api/imageAnalysis/list/page/vo
Content-Type: application/json

# View details
GET /api/imageAnalysis/getInfo/{id}

# Image display
GET /api/imageAnalysis/display/**
```

### 📈 Complete API Documentation
- **Knife4j Documentation**: http://localhost:8123/api/doc.html
- **OpenAPI 3 Specification**: http://localhost:8123/api/v3/api-docs

## 🎨 Feature Characteristics

### Intelligent Image Recognition
- **Multi-platform Support**: WeChat, QQ, DingTalk, Feishu, Telegram, etc.
- **Message Type Recognition**: Text, images, voice, video, files, red packets, transfers, etc.
- **Conversation Role Distinction**: Accurately identify senders and receivers
- **Time Information Extraction**: Recognize message timestamps

### Emotion Analysis Engine
- **Context Understanding**: Analyze conversation background and emotional states
- **Personalized Suggestions**: Generate matching replies based on chat style
- **Diversity Guarantee**: Provide multiple reply options for selection
- **Language Naturalness**: Generate natural and smooth conversation content

### System Monitoring
- **Performance Monitoring**: Real-time monitoring of AI model call performance
- **Error Tracking**: Complete error logs and exception handling
- **Usage Statistics**: User usage and function statistics
- **Cache Monitoring**: Redis cache hit rate monitoring

## 📱 Client Support

### Apple Shortcuts
- **One-click Launch**: Triple-tap the back to use
- **Automatic Screenshot Upload**: Automatically get current screen screenshot
- **Voice Broadcast Results**: Support voice broadcast of analysis results
- **History**: Save recent analysis history

### Web Interface
- **Responsive Design**: Support desktop and mobile
- **Real-time Preview**: Upload images for real-time preview of analysis results
- **History Management**: View and manage chat records
- **Settings Center**: Personalized configuration options

## 🔒 Privacy Security

- **🏠 Local Deployment Priority**: Support complete local deployment, data doesn't leave local environment
- **🔐 Transmission Encryption**: HTTPS + image upload encrypted transmission, protect data security
- **🚪 Session Isolation**: Complete isolation based on chatId, different user data don't interfere with each other
- **🗑️ Automatic Cleanup**: Regularly clean temporary files, cache data and expired sessions
- **🛡️ Access Control**: API interface permission control, prevent unauthorized access
- **📊 Data Desensitization**: Sensitive information automatic desensitization processing, protect user privacy
- **⚡ Memory Safety**: ThreadLocal context automatic cleanup, prevent memory leaks

## 🤝 Contribution Guide

Welcome to submit Issues and Pull Requests!

### Development Environment Setup
1. Fork this repository
2. Create feature branch: `git checkout -b feature/your-feature`
3. Commit changes: `git commit -am 'Add some feature'`
4. Push branch: `git push origin feature/your-feature`
5. Submit Pull Request

### Code Standards
- Follow Google Java Style Guide
- Use Lombok to simplify code
- Add necessary unit tests
- Update related documentation

## 📄 License

This project uses MIT License - see [LICENSE](LICENSE) file for details

## 🙏 Acknowledgments

- [Spring AI](https://spring.io/projects/spring-ai) - Powerful AI integration framework
- [Alibaba Cloud Bailian](https://www.aliyun.com/product/bailian) - Excellent large language model service
- [Apple Shortcuts](https://support.apple.com/guide/shortcuts/welcome/ios) - Convenient automation tool

## 📊 Project Configuration Details

### 🔑 API Key Acquisition

#### Alibaba Cloud Tongyi Qianwen (Required)
1. Visit [Alibaba Cloud Bailian Console](https://dashscope.console.aliyun.com/)
2. Register and complete real-name authentication for Alibaba Cloud account
3. Enable DashScope service
4. Create API Key, copy to configuration file

#### SearchAPI (Optional)
1. Visit [SearchAPI Official Website](https://www.searchapi.io/)
2. Register account and get API Key
3. Configure to `search-api.api-key`

#### Amap MCP (Optional)
1. Visit [Amap Open Platform](https://lbs.amap.com/)
2. Apply for Web Service API Key
3. Configure to `mcp-servers.json`

### ⚙️ Advanced Configuration

#### Performance Tuning
```yaml
# Database connection pool optimization
spring:
  datasource:
    hikari:
      maximum-pool-size: 20      # Maximum connections
      minimum-idle: 5            # Minimum idle connections
      idle-timeout: 300000       # Idle timeout
      connection-timeout: 20000   # Connection timeout

# AI model configuration
spring:
  ai:
    dashscope:
      chat-vl:
        options:
          model: qwen-vl-max      # Vision model
          temperature: 0.6        # Creativity parameter
```

#### Logging Configuration
```yaml
logging:
  level:
    org.springframework.ai: DEBUG     # AI call logs
    cn.chat.ggy.chataiagent: INFO    # Application logs
  file:
    name: logs/ggy-ai-agent.log      # Log file path
```

### 🚀 Production Environment Deployment

#### Complete Deployment Architecture
```
┌─────────────────┐    ┌──────────────────┐    ┌─────────────────┐
│  Frontend Vue3  │    │  Backend Spring  │    │ Static Resource │
│   Port: 5173    │────│   Port: 8123     │────│   Port: 12845   │
│   (Dev Env)     │    │                  │    │   (Nginx)       │
└─────────────────┘    └──────────────────┘    └─────────────────┘
                              │
                    ┌─────────┼─────────┐
                    │         │         │
            ┌───────▼───┐ ┌───▼────┐ ┌──▼──────┐
            │  MySQL    │ │ Redis  │ │Alibaba  │
            │ Port:3306 │ │Port:6379│ │Cloud AI │
            └───────────┘ └────────┘ └─────────┘
```

#### Production Environment Configuration Checklist

**✅ Server Configuration**
- [ ] Java 21+ installed
- [ ] MySQL 8.0+ installed and running
- [ ] Redis 6.0+ installed and running
- [ ] Nginx installed and configured
- [ ] Firewall opened necessary ports (8123, 12845)

**✅ Configuration Files**
- [ ] `application-local.yml` configured with correct API keys
- [ ] `CODE_DEPLOY_HOST` modified to production environment domain
- [ ] Nginx static server configured and running
- [ ] Static resource directory permissions set (`/www/tmp/code_output`)

**✅ Security Configuration**
- [ ] Database password set to strong password
- [ ] Redis password configured (if needed)
- [ ] API keys properly secured
- [ ] Nginx security headers configured

#### Environment Variable Configuration (Recommended)
```bash
# Production environment recommends using environment variables
export DASHSCOPE_API_KEY=your-api-key
export DATABASE_PASSWORD=your-password
export REDIS_PASSWORD=your-redis-password
export CODE_DEPLOY_HOST=http://your-domain.com:12845
```

#### Docker Deployment (Planned)
```dockerfile
# Future versions will provide Docker Compose support
# Including: Spring Boot + MySQL + Redis + Nginx
# Stay tuned...
```

## 📞 Contact Us

- **📧 Email Contact**: 2694732783@qq.com
- **💬 Technical Discussion**: Welcome to submit Issues for technical discussions
- **🔧 Feature Suggestions**: Submit new feature requests through Issues

---

<div align="center">

## 🎉 Ready to Say Goodbye to Awkward Conversations?

### 🍻 Raise a Glass to Celebrate! From Today, You're a Chat Master!

<img src="https://media.giphy.com/media/g9582DNuQppxC/giphy.gif" width="280"/>

*Gatsby-style Elegant Toast* ✨

**💝 Let AI Be Your Chat Assistant, Say Goodbye to the Era of Awkward Conversations!**

---

### 🌟 If This Project Saved You from Chat Troubles

**Please Give a ⭐️ Star to Support! Let More Socially Anxious Friends See This Magic Tool!**

### 🥂 Cheers! Let's Embrace Great Chat Experiences Together!

<img src="https://media.giphy.com/media/8Iv5lqKwKsZ2g/giphy.gif" width="180"/>

*TikTok Yellow Face Cheers Emoji Same Style* 🍷

<br>

<img src="https://github.com/user-attachments/assets/cheers-emoji-final.png" width="120" alt="Cute Yellow Face Cheers"/>

*🍻 Cheers to Saying Goodbye to Awkward Chats!* ✨

</div>
